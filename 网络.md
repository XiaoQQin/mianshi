## 1. OSI与TCP/IP网络模型
### 1.1 OSI七层模型
![osi七层模型](https://user-gold-cdn.xitu.io/2019/8/31/16ce7c55e2003c1b?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)  
### 1.2 TCP/IP五层模型  
其实TCP/IP只有4层，包括：**应用层、传输层、网络互连层、网络链接层**，但是综合OSI七层模型，我们一般称作5层，所以平时称TCP/IP五层模型也没错。  
![tcp/ip五层模型](https://user-gold-cdn.xitu.io/2019/8/31/16ce7e7fe7d7c181?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)  
  
- **应用层**:为应用程序提供网络服务。在互联网中应用层协议很多，如域名系统**DNS**，支持万维网应用的**HTTP协议**，支持电子邮件的**SMTP协议**等等。我们把应用层交互的数据单元称为**报文**。 
  

- **传输层**:负责向两台主机进程之间的通信提供通用的数据传输服务,也就是我们所说的端对端传输。  
   运输层主要使用以下两种协议：  
      - **TCP**：提供面向连接的，可靠的数据传输服务。  
      - **UDP**：提供无连接的，尽最大努力的数据传输服务（不保证数据传输的可靠性）。
  
- **网络层**：网络层的任务就是选择合适的网间路由和交换结点， 确保数据及时传送。也就是ip寻址、路由选择和数据传输。网络层把运输层产生的报文段或用户数据报封装成分组和包进行传送。由于网络层使用 IP 协议，因此分组也叫 IP 数据报 ，简称 数据报。  
  
- **数据链路层**： 控制网络层和物理层之间的通信，提供介质访问和链路管理。物理寻址，将原始比特流传输转变为逻辑传输路线。  
  
- **物理层**: 原始比特流的传输
  
### 网络模型的设备和协议  
在网络模型的每一层都工作着不同的设备，，如下图所示：  
![设备工作](https://user-gold-cdn.xitu.io/2019/8/31/16ce7eb72c0dc44c?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)  
  
每一层的主要协议如下所示：  
  
![协议](https://user-gold-cdn.xitu.io/2019/8/31/16ce7ee86d166933?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)  
  
通常需要注意以下协议；  
- **HTTP、HTTPS在应用层**
- **TCP、UDP在传输层**  
- **IP在网络层**
  
    
[JavaGuide/计算机网络](https://github.com/Snailclimb/JavaGuide/blob/master/docs/network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.md)        
[网络模型--OSI & TCP/IP](https://juejin.im/post/5d398dc26fb9a07ecb0bedde)
  
  
## 2. TCP三次握手与四次挥手
### 2.1 TCP三次握手  
    
![三次握手.PNG](https://i.loli.net/2020/05/04/1kURADPvgrYObF2.png)
![TCP三次握手](https://camo.githubusercontent.com/f6dfce1f05e95f94dbcc4b0bee8c4e3acbfb9f30/68747470733a2f2f6d792d626c6f672d746f2d7573652e6f73732d636e2d6265696a696e672e616c6979756e63732e636f6d2f323031392f372f254534254238253839254536254143254131254536253846254131254536253839253842322e706e67)  
  
**简单描述**:  
  
  - 客户端发送带有**SYN**标志的数据包，一次握手  
  - 服务器发送带有**SYN/ACK**标志的数据包，二次握手  
  - 客户端发送带有**ACK**标志的数据包，三次握手  
  
#### 为什么要三次握手？  
  
三次握手的目的是建立可靠的通信信道,三次握手就是双方确认自己与对方的发送与接收是正常的。  
  
- 第一次握手：Client 什么都不能确认；Server 确认了对方发送正常，自己接收正常
- 第二次握手：Client 确认了：自己发送、接收正常，对方发送、接受正常；Server确认了：对方发送正常，自己接受正常  
- 第三次握手：Client 确认了：自己发送、接收正常，对方发送、接受正常：Server确认了：对方发送正常、接收正常，自己发送、接受正常。  
  
 所以三次握手就能确认客户端和服务器收发功能都正常，缺一不可。  
   
 #### 第2次握手传回了ACK，为什么还要传回SYN？  
 服务器回传给客户端SYN是为了**建立并确认从服务端到客户端的通信**。
